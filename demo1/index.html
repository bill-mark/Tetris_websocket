<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>websocket</title>
</head>
<body>
    <h1>echo test</h1>

    <input type="text" id="sendTxt" />
    <button id="sendBtn">发送</button>

    <div id="recv">
    </div>

    <script type="text/javascript">
       var websocket = new WebSocket("ws://echo.websocket.org/")
       websocket.onopen = function(){
           console.log('open')
           document.getElementById('recv').innerHTML = 'connected'
       }

       websocket.onclose = function(){
           console.log('websocket close')
       }

       websocket.onmessage = function(e){
           console.log('message',e.data)
           document.getElementById('recv').innerHTML = e.data
       }

       document.getElementById('sendBtn').onclick = function(){
           var txt =  document.getElementById('sendTxt').value
           websocket.send(txt)
       }
    </script>
</body>
</html>